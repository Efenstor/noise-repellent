{
    "tasks": [
        {
            "label": "CleanBuildFolder",
            "type": "shell",
            "command": "rm -rf ./build"
        },
        {
            "label": "MesonDebugConfig",
            "type": "shell",
            "command": "meson build --warnlevel=1 --werror --prefix=~/"
            // "command": "meson build --warnlevel=3 --prefix=~/"
        },
        {
            "label": "MesonReleaseConfig",
            "type": "shell",
            "command": "meson build --warnlevel=0 --buildtype=release --prefix=/usr --libdir=lib"
        },
        {
            "label": "NinjaBuild",
            "type": "shell",
            "command": "ninja -C build -v",
            "problemMatcher": {
                "base": "$gcc",
                "fileLocation": [
                    "relative",
                    "${workspaceFolder}/src"
                ],
            },
        },
        {
            "label": "NinjaInstall",
            "type": "shell",
            "command": "ninja -C build install"
        },
        {
            "label": "NinjaTest",
            "type": "shell",
            "command": "ninja -C build test"
        },
        {
            "label": "NinjaUninstall",
            "type": "shell",
            "command": "sudo ninja -C build uninstall"
        },
        {
            "label": "NinjaClean",
            "type": "shell",
            "command": "ninja -C build -t clean"
        },
        {
            "label": "Lv2Validate",
            "type": "shell",
            "command": "lv2_validate $(find ./build -name *.ttl)"
        },
        {
            "label": "Lv2Lint",
            "type": "shell",
            "command": "lv2lint -S note -S warn -d https://github.com/lucianodato/noise-repellent"
        },
        {
            "label": "Lv2Bench",
            "type": "shell",
            "command": "for i in {1..10}; do lv2bench https://github.com/lucianodato/noise-repellent; done"
        },
        {
            "label": "Jalv.gtk3",
            "type": "shell",
            "command": "jalv.gtk3 -s -d -t https://github.com/lucianodato/noise-repellent"
        },
        {
            "label": "Lv2Bm",
            "type": "shell",
            "command": "lv2bm --full-test https://github.com/lucianodato/noise-repellent"
        },
        {
            "label": "ValgrindLv2Bench",
            "type": "shell",
            "command": "valgrind",
            "args": [
                "-s",
                "--leak-check=yes",
                "--show-reachable=no",
                "--log-file=./output.valgrind",
                "lv2bench",
                "https://github.com/lucianodato/noise-repellent"
            ]
        },
        {
            "label": "ValgrindLv2Apply",
            "type": "shell",
            "command": "valgrind",
            "args": [
                "--leak-check=full",
                "--show-reachable=no",
                "lv2apply",
                "-i",
                "~/Music/noise.wav",
                "-o",
                "~/Music/denoised.wav",
                "https://github.com/lucianodato/noise-repellent"
            ]
        },
        {
            "label": "ValgrindLv2Bm",
            "type": "shell",
            "command": "valgrind",
            "args": [
                "--leak-check=full",
                "--show-reachable=no",
                "lv2bm",
                "--full-test",
                "https://github.com/lucianodato/noise-repellent"
            ]
        },
        {
            "label": "DebugPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonDebugConfig",
                "NinjaBuild",
                "NinjaInstall"
            ],
            "dependsOrder": "sequence",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ValgrindPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonDebugConfig",
                "NinjaBuild",
                "NinjaInstall",
                "ValgrindLv2Bench"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "TestPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonReleaseConfig",
                "NinjaBuild",
                "NinjaInstall",
                "Lv2Bench",
                "SordValidate"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "InstallPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonReleaseConfig",
                "NinjaBuild",
                "NinjaInstall"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "UninstallPlugin",
            "dependsOn": [
                "NinjaUninstall",
                "NinjaClean",
                "CleanBuildFolder"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "InstallDevelopmentDependencies",
            "type": "shell",
            "command": "sudo apt install build-essential gdb valgrind meson ninja-build git lv2-dev libfftw3-dev sordi lilv-utils"
        },
        {
            "label": "InstallDevelopmentLinters",
            "type": "shell",
            "command": "sudo apt install clang clang-tidy"
        }
    ],
    "version": "2.0.0"
}