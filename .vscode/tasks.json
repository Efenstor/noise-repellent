{
    "tasks": [
        {
            "label": "CleanBuildFolder",
            "type": "shell",
            "command": "rm -rf ./build"
        },
        {
            "label": "MesonDebugConfig",
            "type": "shell",
            "command": "meson build --werror --prefix=~/"
        },
        {
            "label": "MesonReleaseConfig",
            "type": "shell",
            "command": "meson build --warnlevel=0 --buildtype=release --prefix=/usr --libdir=lib"
        },
        {
            "label": "NinjaBuild",
            "type": "shell",
            "command": "ninja -C build -v",
            "problemMatcher": {
                "base": "$gcc",
                "fileLocation": [
                    "relative",
                    "${workspaceFolder}/src"
                ],
            },
        },
        {
            "label": "NinjaInstall",
            "type": "shell",
            "command": "ninja -C build install"
        },
        {
            "label": "NinjaTest",
            "type": "shell",
            "command": "ninja -C build test"
        },
        {
            "label": "NinjaUninstall",
            "type": "shell",
            "command": "sudo ninja -C build uninstall"
        },
        {
            "label": "NinjaClean",
            "type": "shell",
            "command": "ninja -C build -t clean"
        },
        {
            "label": "SordValidate",
            "type": "shell",
            "command": "sord_validate $(find ./build -name *.ttl) $(find /usr/lib/lv2 -name *.ttl)"
        },
        {
            "label": "Lv2Bench",
            "type": "shell",
            "command": "for i in {1..10}; do lv2bench https://github.com/lucianodato/noise-repellent; done"
        },
        {
            "label": "ValgrindLv2Bench",
            "type": "shell",
            "command": "valgrind",
            "args": [
                "-s",
                "--leak-check=yes",
                "--show-reachable=yes",
                "--track-origins=yes",
                "--log-file=./output.valgrind",
                "lv2bench",
                "https://github.com/lucianodato/noise-repellent"
            ]
        },
        {
            "label": "DebugPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonDebugConfig",
                "NinjaBuild",
                "NinjaInstall"
            ],
            "dependsOrder": "sequence",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ValgrindPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonDebugConfig",
                "NinjaBuild",
                "NinjaInstall",
                "ValgrindLv2Apply"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "TestPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonReleaseConfig",
                "NinjaBuild",
                "NinjaInstall",
                "Lv2Bench",
                "SordValidate"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "InstallPlugin",
            "dependsOn": [
                "CleanBuildFolder",
                "MesonReleaseConfig",
                "NinjaBuild",
                "NinjaInstall"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "UninstallPlugin",
            "dependsOn": [
                "NinjaUninstall",
                "NinjaClean",
                "CleanBuildFolder"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label": "InstallDevelopmentDependencies",
            "type": "shell",
            "command": "sudo apt install build-essential gdb valgrind meson ninja-build git lv2-dev libfftw3-dev sordi lilv-utils"
        },
        {
            "label": "InstallDevelopmentLinters",
            "type": "shell",
            "command": "sudo apt install clang clang-tidy"
        }
    ],
    "version": "2.0.0"
}